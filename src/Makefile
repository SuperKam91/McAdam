# Makefile for McAdam/src, generated by config.sh 
 
PROGS = McAdam 

INCLUDEDIRS = -I../multinest -I../PolyChord -I.
 
FFLAGS = $(EXTRAFLAGS) $(FDEBUGFLAGS) $(INCLUDEDIRS)
CFLAGS = $(EXTRAFLAGS) $(CDEBUGFLAGS) $(INCLUDEDIRS) 
CXXFLAGS =  $(EXTRAFLAGS) $(CDEBUGFLAGS) $(INCLUDEDIRS) 
 
LIBDIR = ../lib
BINDIR = ../bin
 
LIBS = $(LAPACKLIB) $(FFTWLIB) -lcfitsio
 
MCLIBS = -lstdc++ -L$(LIBDIR) -lnest3 -lchord
 
MOBJECTS = params.o aux.o p_alpha.o constants.o telescope.o matrix_utils.o \
	utilities.o cosmology.o massfunction.o lensing.o \
        fftw.o MassModels.o fits_handling.o ReadWrite.o Priors.o \
        CheckPars.o GasModels.o like.o params_MakeData.o MakeData.o \
        nestwrap.o McAdam.o
      
TOBJECTS = params.o aux.o p_alpha.o constants.o telescope.o matrix_utils.o \
	utilities.o cosmology.o massfunction.o \
        fftw.o MassModels.o fits_handling.o ReadWrite.o Priors.o \
        CheckPars.o GasModels.o like.o test_likelihood.o

makCatOBJ = makeCat.o
 
%.o: %.f90 
	$(FC) $(FFLAGS) -c -o $@ $^ 

%.o: %.c 
	$(CC) $(CFLAGS) -c -o $@ $^ 
 
%.o: %.f 
	$(FC) $(FFLAGS) -c -o $@ $^ 
 
 
all:  McAdam test_likelihood
 
McAdam: $(MOBJECTS)
	$(FC) $(FFLAGS) -o McAdam $(MOBJECTS) $(MCLIBS) $(LIBS) $(FLIBS) 
	-mv $@ $(BINDIR)
	-rm *.o  

test_likelihood: $(TOBJECTS)
	$(FC) $(FFLAGS) -o test_likelihood $(TOBJECTS) $(MCLIBS) $(LIBS) $(FLIBS) 
	-mv $@ $(BINDIR)
	-rm *.o

makeCat: $(makCatOBJ)
	$(FC) $(FFLAGS) -o makeCat $(makCatOBJ) $(MCLIBS) $(LIBS) $(FLIBS)
 
clean: 
	-rm *.o *.mod
	-rm $(BINDIR)/McAdam $(BINDIR)/McAdam.exe $(BINDIR)/test_likelihood $(BINDIR)/test_likelihood.exe

